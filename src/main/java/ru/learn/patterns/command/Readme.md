# Паттерн Команда

Инкапсулирует запрос в виде объекта, делая возможной параметризацию клиентских объектов с другими запросами, организацию очереди или регистрацию запросов, а также поддержку отмены операций.

Основной смысл данного паттерна в том, чтобы отделить инициатора от конкретного исполнителя и набора операций.

*Идею* паттерна можно рассмотреть на основе искусственного примера с кафе:
Действующие лица: посетитель (клиент), официантка (инициатор), повар (исполнитель), заказ (команда).
1) *Посетитель* делает *заказ* и передаёт его *официантке*. *Бланк заказа* можно рассматривать как запрос на приготовление
   еды. *Бланк* инкапсулирует все действия необходимые для приготовления блюд. Инкапсуляция заключается в том, что
   *официантку* не интересует содержимое заказа и кто его будет выполнять. Она лишь инициирует его выполнение *поваром*.
2) *Официантка* продолжает принимать *заказы* и в определённый момент кладёт *заказ (ы)* на стойку и инициирует их выполнение.
   В течение рабочего дня официантка принимает множество разнообразных *заказов* от множества *клиентов*. *Официантке* известно, что
   все *заказы* реализуют один интерфейс.
3) После того, как *официантка* инициирует создание блюд в *заказе (ах)* за дело берётся *повар*. Он исполняет все инструкции из *заказа (ов)*.
   *Официантку* и *повара* ничто не связывает. Вся информация о заказанных блюдах инкапсулирована в *заказе*. *Официантка* только инициирует 
   выполнение каждого заказа. *Повар* получает свои инструкции из бланка *заказа*. ему никогда не приходится взаимодействовать с 
   *официанткой* напрямую.

Краткое описание API и взаимодействия между объектами:
1) Клиент создает объект команды, содержащего набор операций, связанных с получателем. Объект команды содержит единственный метод execute(), в котором инкапсулируются операции с Получателем.
2) Клиент вызывает метод setCommand() Инициатора и передает ему объект команды. Инициатор сохраняет последний до момента использования.
3) Клиент обращается к инициатору с запросом на выполнение команды. Команда, загруженная Инициатором, может как уничтожаться после выполнения, так и оставаться
   для повторного использования.

Объект команды инкапсулирует запрос посредством привязки набора операций к конкретному получателю. Для этого
информация об операции и получателе «упаковывается» в объекте с единственным методом execute(). При вызове
метод execute() выполняет операцию с данным получателем. Внешние объекты не знают, какие именно операции
выполняются и с каким получателем, они знают только, что при вызове метода execute() их запрос будет выполнен.

В данном паттерне применяются как одиночные так и макро (состоящие из нескольких) команды.
Команды могут реализовывать два метода: execute (выполнить), и rollback (откатить)
Этот паттерн находит применение в следующих приложениях:
* Планировщик
* Очередь заданий
* Пул потоков
* Механизм транзакций

Встречаются расширения данного паттерна в виде регистрации запросов для восстановления после сбоя.
Команды сбрасываются на диск в журнальный файл, потом восстанавливаются от последней контрольной точки после сбоя и выполняются повторно.




